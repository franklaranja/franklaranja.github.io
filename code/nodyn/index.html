<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalabl
e=yes">
    <title>
      
      nodyn | 
      Laranja's Web Shop
    </title>
    <link rel="stylesheet" href="/styles.css">
    <meta charset="UTF-8">
</head>
<body>
    
    <header>
        <div class="hero">
          
            <picture>
              <source srcset="menu-nodyn.avif" type="image/avif">
              <source srcset="menu-nodyn.webp" type="image/webp">
              <img src="menu-nodyn.jpg" alt="Detail of chromed gear with text nodyn!! inside">
            </picture>
          
            <nav class="menu">
                <a href="/articles" class="nav-button">Articles</a>
                <a href="/code" class="nav-button selected">Code</a>
                <a href="/contact" class="nav-button">Contact</a>
                <a href="/about" class="nav-button">About</a>
            </nav>
            <h1 class="site-title"><a href="/">Laranja's Rust Shop</a></h1>
        </div>
    </header>
    <main>
        <section>
          <h1>nodyn</h1>
          
            <picture>
              <source srcset="nodyn_gear.avif" type="image/avif">
              <source srcset="nodyn_gear.webp" type="image/webp">
              <img src="nodyn_gear.png" alt="Polymorphic gear" class="crate-icon">
            </picture>
          
          <div class="crate-meta">
            <span class="badge">v0.2.2</span>
            <span class="badge">Library</span>
            <span class="badge">MIT</span>
            
              <span class="badge">proc-macro</span>
            
              <span class="badge">enum</span>
            
              <span class="badge">polymorphism</span>
            
          </div>
          <div align="center">
<p><em>Easy polymorphism with enums</em></p>
</div>
<p><code>nodyn</code> provides a Rust macro for creating wrapper enums that
encapsulate a fixed set of types with automatic implementations
for <code>From</code>, <code>TryFrom</code>, and delegated methods or traits. This is
ideal for scenarios where you need to store values of different
types in a type-safe, zero-cost way, as an alternative to trait
objects.</p>
<blockquote>
<p>"This is a perfectly good solution when our interchangeable
items are a fixed set of types that we know when our code is compiled."<br />
<a href="http://doc.rust-lang.org/book/ch18-02-trait-objects.html">The Rust Programming Language</a></p>
</blockquote>
<h2 id="quick-start">Quick Start</h2>
<p>Create a simple enum wrapper for <code>i32</code>, <code>String</code>, and <code>f64</code>:</p>
<pre data-lang="rust" style="background-color:#00141a;color:#eda15f;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#f2bc8c;">nodyn</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">nodyn</span><span style="color:#1ad1ff;">! </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">    </span><span style="color:#bcc2c3;">#[</span><span style="color:#b483c8;">derive</span><span style="color:#bcc2c3;">(</span><span style="color:#f2bc8c;">Debug</span><span style="color:#bcc2c3;">,</span><span style="color:#f2bc8c;"> PartialEq</span><span style="color:#bcc2c3;">)]
</span><span style="color:#f2bc8c;">    </span><span style="color:#1ad1ff;">pub </span><span style="font-weight:bold;color:#e88731;">enum </span><span style="color:#f2bc8c;">Value </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">        </span><span style="color:#1ad1ff;">i32</span><span style="color:#bcc2c3;">,
</span><span style="color:#f2bc8c;">        </span><span style="color:#e88731;">String</span><span style="color:#bcc2c3;">,
</span><span style="color:#f2bc8c;">        </span><span style="color:#1ad1ff;">f64</span><span style="color:#bcc2c3;">,
</span><span style="color:#f2bc8c;">    </span><span style="color:#bcc2c3;">}
</span><span style="color:#bcc2c3;">}
</span><span style="color:#f2bc8c;">
</span><span style="color:#1ad1ff;">let</span><span style="color:#f2bc8c;"> values</span><span style="color:#bcc2c3;">: </span><span style="color:#e88731;">Vec</span><span style="color:#bcc2c3;">&lt;</span><span style="color:#f2bc8c;">Value</span><span style="color:#bcc2c3;">&gt; </span><span style="color:#1ad1ff;">= </span><span style="color:#e88731;">vec!</span><span style="color:#bcc2c3;">[
</span><span style="color:#f2bc8c;">    42.</span><span style="color:#e88731;">into</span><span style="color:#bcc2c3;">(),                  </span><span style="font-style:italic;color:#bcc2c3;">//</span><span style="font-style:italic;color:#869293;"> Converts i32 to Value::I32
</span><span style="color:#f2bc8c;">    </span><span style="color:#bcc2c3;">&quot;</span><span style="color:#44d581;">hello</span><span style="color:#bcc2c3;">&quot;.</span><span style="color:#e88731;">to_string</span><span style="color:#bcc2c3;">().</span><span style="color:#e88731;">into</span><span style="color:#bcc2c3;">(), </span><span style="font-style:italic;color:#bcc2c3;">//</span><span style="font-style:italic;color:#869293;"> Converts String to Value::String
</span><span style="color:#f2bc8c;">    3.14</span><span style="color:#bcc2c3;">.</span><span style="color:#e88731;">into</span><span style="color:#bcc2c3;">(),                </span><span style="font-style:italic;color:#bcc2c3;">//</span><span style="font-style:italic;color:#869293;"> Converts f64 to Value::F64
</span><span style="color:#bcc2c3;">];
</span><span style="color:#f2bc8c;">
</span><span style="color:#1ad1ff;">for</span><span style="color:#f2bc8c;"> value </span><span style="color:#1ad1ff;">in</span><span style="color:#f2bc8c;"> values </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">    </span><span style="color:#1ad1ff;">match</span><span style="color:#f2bc8c;"> value </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">        Value</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">I32</span><span style="color:#bcc2c3;">(</span><span style="color:#f2bc8c;">n</span><span style="color:#bcc2c3;">) </span><span style="color:#1ad1ff;">=&gt; </span><span style="color:#e88731;">println!</span><span style="color:#bcc2c3;">(&quot;</span><span style="color:#44d581;">Integer: {}</span><span style="color:#bcc2c3;">&quot;,</span><span style="color:#f2bc8c;"> n</span><span style="color:#bcc2c3;">),
</span><span style="color:#f2bc8c;">        Value</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">String</span><span style="color:#bcc2c3;">(</span><span style="color:#f2bc8c;">s</span><span style="color:#bcc2c3;">) </span><span style="color:#1ad1ff;">=&gt; </span><span style="color:#e88731;">println!</span><span style="color:#bcc2c3;">(&quot;</span><span style="color:#44d581;">String: {}</span><span style="color:#bcc2c3;">&quot;,</span><span style="color:#f2bc8c;"> s</span><span style="color:#bcc2c3;">),
</span><span style="color:#f2bc8c;">        Value</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">F64</span><span style="color:#bcc2c3;">(</span><span style="color:#f2bc8c;">f</span><span style="color:#bcc2c3;">) </span><span style="color:#1ad1ff;">=&gt; </span><span style="color:#e88731;">println!</span><span style="color:#bcc2c3;">(&quot;</span><span style="color:#44d581;">Float: {}</span><span style="color:#bcc2c3;">&quot;,</span><span style="color:#f2bc8c;"> f</span><span style="color:#bcc2c3;">),
</span><span style="color:#f2bc8c;">    </span><span style="color:#bcc2c3;">}
</span><span style="color:#bcc2c3;">}
</span></code></pre>
<h2 id="features">Features</h2>
<ul>
<li><strong>Automatic Variant Creation</strong>: Generates enum variants for types
like <code>i32</code>, <code>String</code>, or custom structs with CamelCase naming.</li>
<li><strong>Type Conversions</strong>: Implements <code>From&lt;T&gt;</code> for each variant and <code>TryFrom&lt;Enum&gt;</code>
with the <code>impl TryInto</code> directive.</li>
<li><strong>Method and Trait Delegation</strong>: Delegates methods or entire traits to
underlying types.</li>
<li><strong>Type Introspection</strong>: Provides <code>count</code>, <code>types</code>, and <code>type_name</code>
methods with <code>impl introspection</code>.</li>
<li><strong>Polymorphic Vec</strong>: Generates a <code>Vec&lt;Enum&gt;</code> wrapper with a <code>vec!</code>-like macro
and variant-specific methods (e.g., <code>first_i32</code>, <code>count_string</code>) via
<code>vec</code>.</li>
<li><strong>Customizable Variants</strong>: Allows overriding default variant names.</li>
<li><strong>Supported Types</strong>: Handles path types, references, arrays, and tuples.</li>
</ul>
<p>Use <code>impl</code> directives to enable features explicitly (e.g., <code>impl TryInto is_as</code>). Cargo features (<code>try_into</code>, <code>is_as</code>, <code>introspection</code>) are
deprecated but supported for backward compatibility. See the <a href="https://github.com/franklaranja/nodyn/blob/main/src/lib.rs#feature-flags">Feature Flags section</a>
for details.</p>
<h3 id="vec-wrapper-example">Vec Wrapper Example</h3>
<p>Use the <code>vec</code> feature to create a polymorphic <code>Vec</code> with variant-specific
methods:</p>
<pre data-lang="rust" style="background-color:#00141a;color:#eda15f;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#f2bc8c;">nodyn</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">nodyn</span><span style="color:#1ad1ff;">! </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">    </span><span style="color:#bcc2c3;">#[</span><span style="color:#b483c8;">derive</span><span style="color:#bcc2c3;">(</span><span style="color:#f2bc8c;">Debug</span><span style="color:#bcc2c3;">,</span><span style="color:#f2bc8c;"> Clone</span><span style="color:#bcc2c3;">)]
</span><span style="color:#f2bc8c;">    </span><span style="color:#1ad1ff;">pub </span><span style="font-weight:bold;color:#e88731;">enum </span><span style="color:#f2bc8c;">Item </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">        </span><span style="color:#1ad1ff;">i32</span><span style="color:#bcc2c3;">,    </span><span style="font-style:italic;color:#bcc2c3;">//</span><span style="font-style:italic;color:#869293;"> Gold coins
</span><span style="color:#f2bc8c;">        </span><span style="color:#e88731;">String</span><span style="color:#bcc2c3;">, </span><span style="font-style:italic;color:#bcc2c3;">//</span><span style="font-style:italic;color:#869293;"> Weapon names
</span><span style="color:#f2bc8c;">        </span><span style="color:#1ad1ff;">f64</span><span style="color:#bcc2c3;">,    </span><span style="font-style:italic;color:#bcc2c3;">//</span><span style="font-style:italic;color:#869293;"> Health potions (liters)
</span><span style="color:#f2bc8c;">    </span><span style="color:#bcc2c3;">}
</span><span style="color:#f2bc8c;">    vec Inventory</span><span style="color:#bcc2c3;">;
</span><span style="color:#bcc2c3;">}
</span><span style="color:#f2bc8c;">
</span><span style="color:#1ad1ff;">let mut</span><span style="color:#f2bc8c;"> inventory </span><span style="color:#1ad1ff;">= </span><span style="color:#e88731;">inventory!</span><span style="color:#bcc2c3;">[</span><span style="color:#f2bc8c;">100</span><span style="color:#bcc2c3;">, &quot;</span><span style="color:#44d581;">sword</span><span style="color:#bcc2c3;">&quot;.</span><span style="color:#e88731;">to_string</span><span style="color:#bcc2c3;">(), </span><span style="color:#f2bc8c;">0.5</span><span style="color:#bcc2c3;">, &quot;</span><span style="color:#44d581;">axe</span><span style="color:#bcc2c3;">&quot;.</span><span style="color:#e88731;">to_string</span><span style="color:#bcc2c3;">()];
</span><span style="font-style:italic;color:#bcc2c3;">//</span><span style="font-style:italic;color:#869293;"> Add more gold
</span><span style="color:#f2bc8c;">inventory</span><span style="color:#bcc2c3;">.</span><span style="color:#e88731;">push</span><span style="color:#bcc2c3;">(</span><span style="color:#f2bc8c;">50</span><span style="color:#bcc2c3;">);
</span><span style="font-style:italic;color:#bcc2c3;">//</span><span style="font-style:italic;color:#869293;"> Check for weapons in the inventory
</span><span style="color:#e88731;">assert!</span><span style="color:#bcc2c3;">(</span><span style="color:#f2bc8c;">inventory</span><span style="color:#bcc2c3;">.</span><span style="color:#e88731;">any_string</span><span style="color:#bcc2c3;">());
</span><span style="font-style:italic;color:#bcc2c3;">//</span><span style="font-style:italic;color:#869293;"> Total gold coins
</span><span style="color:#1ad1ff;">let</span><span style="color:#f2bc8c;"> total_gold </span><span style="color:#1ad1ff;">=</span><span style="color:#f2bc8c;"> inventory</span><span style="color:#bcc2c3;">.</span><span style="color:#e88731;">iter_i32</span><span style="color:#bcc2c3;">().</span><span style="color:#f2bc8c;">sum</span><span style="color:#bcc2c3;">::&lt;</span><span style="color:#1ad1ff;">i32</span><span style="color:#bcc2c3;">&gt;();
</span><span style="color:#e88731;">assert_eq!</span><span style="color:#bcc2c3;">(</span><span style="color:#f2bc8c;">total_gold</span><span style="color:#bcc2c3;">, </span><span style="color:#f2bc8c;">150</span><span style="color:#bcc2c3;">);
</span><span style="font-style:italic;color:#bcc2c3;">//</span><span style="font-style:italic;color:#869293;"> Get a potion
</span><span style="color:#1ad1ff;">if let </span><span style="color:#e88731;">Some</span><span style="color:#bcc2c3;">(</span><span style="color:#f2bc8c;">potion</span><span style="color:#bcc2c3;">) </span><span style="color:#1ad1ff;">=</span><span style="color:#f2bc8c;"> inventory</span><span style="color:#bcc2c3;">.</span><span style="color:#e88731;">first_f64</span><span style="color:#bcc2c3;">() {
</span><span style="color:#f2bc8c;">    </span><span style="color:#e88731;">println!</span><span style="color:#bcc2c3;">(&quot;</span><span style="color:#44d581;">Found potion: {} liters</span><span style="color:#bcc2c3;">&quot;,</span><span style="color:#f2bc8c;"> potion</span><span style="color:#bcc2c3;">); </span><span style="font-style:italic;color:#bcc2c3;">//</span><span style="font-style:italic;color:#869293;"> Prints: 0.5 liters
</span><span style="color:#bcc2c3;">}
</span></code></pre>
<p>See the Polymorphic Vec section in the <a href="https://docs.rs/nodyn">Documentation</a></p>
<h2 id="method-delegation-example">Method Delegation Example</h2>
<pre data-lang="rust" style="background-color:#00141a;color:#eda15f;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#f2bc8c;">nodyn</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">nodyn</span><span style="color:#1ad1ff;">! </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">    </span><span style="font-weight:bold;color:#e88731;">enum </span><span style="color:#f2bc8c;">Container </span><span style="color:#bcc2c3;">{ </span><span style="color:#e88731;">String</span><span style="color:#bcc2c3;">, </span><span style="color:#e88731;">Vec</span><span style="color:#bcc2c3;">&lt;</span><span style="color:#1ad1ff;">u8</span><span style="color:#bcc2c3;">&gt; }
</span><span style="color:#f2bc8c;">    </span><span style="color:#1ad1ff;">impl </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">        </span><span style="color:#1ad1ff;">fn </span><span style="font-weight:bold;color:#9f60b9;">len</span><span style="color:#bcc2c3;">(</span><span style="color:#1ad1ff;">&amp;</span><span style="color:#b483c8;">self</span><span style="color:#bcc2c3;">) -&gt; </span><span style="color:#1ad1ff;">usize</span><span style="color:#bcc2c3;">;
</span><span style="color:#f2bc8c;">        </span><span style="color:#1ad1ff;">fn </span><span style="font-weight:bold;color:#9f60b9;">is_empty</span><span style="color:#bcc2c3;">(</span><span style="color:#1ad1ff;">&amp;</span><span style="color:#b483c8;">self</span><span style="color:#bcc2c3;">) -&gt; </span><span style="color:#1ad1ff;">bool</span><span style="color:#bcc2c3;">;
</span><span style="color:#f2bc8c;">        </span><span style="color:#1ad1ff;">fn </span><span style="font-weight:bold;color:#9f60b9;">clear</span><span style="color:#bcc2c3;">(</span><span style="color:#1ad1ff;">&amp;mut </span><span style="color:#b483c8;">self</span><span style="color:#bcc2c3;">);
</span><span style="color:#f2bc8c;">    </span><span style="color:#bcc2c3;">}
</span><span style="color:#bcc2c3;">}
</span><span style="color:#f2bc8c;">
</span><span style="color:#1ad1ff;">let mut</span><span style="color:#f2bc8c;"> container</span><span style="color:#bcc2c3;">:</span><span style="color:#f2bc8c;"> Container </span><span style="color:#1ad1ff;">= </span><span style="color:#bcc2c3;">&quot;</span><span style="color:#44d581;">hello</span><span style="color:#bcc2c3;">&quot;.</span><span style="color:#e88731;">to_string</span><span style="color:#bcc2c3;">().</span><span style="color:#e88731;">into</span><span style="color:#bcc2c3;">();
</span><span style="color:#e88731;">assert_eq!</span><span style="color:#bcc2c3;">(</span><span style="color:#f2bc8c;">container</span><span style="color:#bcc2c3;">.</span><span style="color:#e88731;">len</span><span style="color:#bcc2c3;">(), </span><span style="color:#f2bc8c;">5</span><span style="color:#bcc2c3;">);
</span><span style="color:#e88731;">assert!</span><span style="color:#bcc2c3;">(</span><span style="color:#1ad1ff;">!</span><span style="color:#f2bc8c;">container</span><span style="color:#bcc2c3;">.</span><span style="color:#e88731;">is_empty</span><span style="color:#bcc2c3;">());
</span><span style="color:#f2bc8c;">container</span><span style="color:#bcc2c3;">.</span><span style="color:#e88731;">clear</span><span style="color:#bcc2c3;">();
</span><span style="color:#e88731;">assert!</span><span style="color:#bcc2c3;">(</span><span style="color:#f2bc8c;">container</span><span style="color:#bcc2c3;">.</span><span style="color:#e88731;">is_empty</span><span style="color:#bcc2c3;">());
</span></code></pre>
<h2 id="trait-implementation-example">Trait Implementation Example</h2>
<p>Delegate entire traits when all wrapped types implement them:</p>
<pre data-lang="rust" style="background-color:#00141a;color:#eda15f;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#1ad1ff;">use </span><span style="color:#f2bc8c;">std</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">fmt</span><span style="color:#bcc2c3;">::{</span><span style="color:#80e5ff;">self</span><span style="color:#bcc2c3;">,</span><span style="color:#f2bc8c;"> Display</span><span style="color:#bcc2c3;">};
</span><span style="color:#f2bc8c;">
</span><span style="font-style:italic;color:#bcc2c3;">//</span><span style="font-style:italic;color:#869293;"> All wrapped types implement Display
</span><span style="color:#f2bc8c;">nodyn</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">nodyn</span><span style="color:#1ad1ff;">! </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">    </span><span style="font-weight:bold;color:#e88731;">enum </span><span style="color:#f2bc8c;">Displayable </span><span style="color:#bcc2c3;">{ </span><span style="color:#1ad1ff;">i32</span><span style="color:#bcc2c3;">, </span><span style="color:#e88731;">String</span><span style="color:#bcc2c3;">, </span><span style="color:#1ad1ff;">f64 </span><span style="color:#bcc2c3;">}
</span><span style="color:#f2bc8c;">
</span><span style="color:#f2bc8c;">    </span><span style="color:#1ad1ff;">impl </span><span style="color:#f2bc8c;">Display </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">        </span><span style="color:#1ad1ff;">fn </span><span style="font-weight:bold;color:#9f60b9;">fmt</span><span style="color:#bcc2c3;">(</span><span style="color:#1ad1ff;">&amp;</span><span style="color:#b483c8;">self</span><span style="color:#f2bc8c;">, </span><span style="color:#b483c8;">f</span><span style="color:#bcc2c3;">: </span><span style="color:#1ad1ff;">&amp;mut </span><span style="color:#f2bc8c;">fmt</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">Formatter</span><span style="color:#bcc2c3;">&lt;</span><span style="color:#f2bc8c;">&#39;</span><span style="color:#1ad1ff;">_</span><span style="color:#bcc2c3;">&gt;) -&gt; </span><span style="color:#f2bc8c;">fmt</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">Result</span><span style="color:#bcc2c3;">;
</span><span style="color:#f2bc8c;">    </span><span style="color:#bcc2c3;">}
</span><span style="color:#f2bc8c;">
</span><span style="color:#f2bc8c;">    vec Displayables</span><span style="color:#bcc2c3;">;
</span><span style="color:#bcc2c3;">}
</span><span style="color:#f2bc8c;">
</span><span style="color:#1ad1ff;">let</span><span style="color:#f2bc8c;"> values </span><span style="color:#1ad1ff;">= </span><span style="color:#e88731;">displayables!</span><span style="color:#bcc2c3;">[</span><span style="color:#f2bc8c;">42</span><span style="color:#bcc2c3;">, &quot;</span><span style="color:#44d581;">hello</span><span style="color:#bcc2c3;">&quot;.</span><span style="color:#e88731;">to_string</span><span style="color:#bcc2c3;">(), </span><span style="color:#f2bc8c;">3.14</span><span style="color:#bcc2c3;">];
</span><span style="color:#f2bc8c;">
</span><span style="color:#1ad1ff;">for</span><span style="color:#f2bc8c;"> val </span><span style="color:#1ad1ff;">in</span><span style="color:#f2bc8c;"> values </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">    </span><span style="color:#e88731;">println!</span><span style="color:#bcc2c3;">(&quot;</span><span style="color:#44d581;">{}</span><span style="color:#bcc2c3;">&quot;,</span><span style="color:#f2bc8c;"> val</span><span style="color:#bcc2c3;">); </span><span style="font-style:italic;color:#bcc2c3;">//</span><span style="font-style:italic;color:#869293;"> Uses delegated Display implementation
</span><span style="color:#bcc2c3;">}
</span></code></pre>
<h3 id="json-example">JSON Example</h3>
<p>This example creates a JSON-like data structure with nested arrays,
showcasing trait delegation and Polymorphic Vec features:</p>
<pre data-lang="rust" style="background-color:#00141a;color:#eda15f;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#1ad1ff;">use </span><span style="color:#f2bc8c;">std</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">fmt</span><span style="color:#bcc2c3;">;
</span><span style="color:#f2bc8c;">
</span><span style="color:#bcc2c3;">#[</span><span style="color:#b483c8;">derive</span><span style="color:#bcc2c3;">(</span><span style="color:#f2bc8c;">Debug</span><span style="color:#bcc2c3;">,</span><span style="color:#f2bc8c;"> Clone</span><span style="color:#bcc2c3;">)]
</span><span style="color:#1ad1ff;">pub </span><span style="font-weight:bold;color:#e88731;">struct </span><span style="color:#f2bc8c;">Null</span><span style="color:#bcc2c3;">;
</span><span style="color:#f2bc8c;">
</span><span style="color:#1ad1ff;">impl </span><span style="color:#f2bc8c;">fmt</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">Display </span><span style="color:#1ad1ff;">for </span><span style="color:#f2bc8c;">Null </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">    </span><span style="color:#1ad1ff;">fn </span><span style="font-weight:bold;color:#9f60b9;">fmt</span><span style="color:#bcc2c3;">(</span><span style="color:#1ad1ff;">&amp;</span><span style="color:#b483c8;">self</span><span style="color:#f2bc8c;">, </span><span style="color:#b483c8;">f</span><span style="color:#bcc2c3;">: </span><span style="color:#1ad1ff;">&amp;mut </span><span style="color:#f2bc8c;">fmt</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">Formatter</span><span style="color:#bcc2c3;">&lt;</span><span style="color:#f2bc8c;">&#39;</span><span style="color:#1ad1ff;">_</span><span style="color:#bcc2c3;">&gt;) -&gt; </span><span style="color:#f2bc8c;">fmt</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">Result </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">        </span><span style="color:#e88731;">write!</span><span style="color:#bcc2c3;">(</span><span style="color:#f2bc8c;">f, </span><span style="color:#bcc2c3;">&quot;</span><span style="color:#44d581;">null</span><span style="color:#bcc2c3;">&quot;)
</span><span style="color:#f2bc8c;">    </span><span style="color:#bcc2c3;">}
</span><span style="color:#bcc2c3;">}
</span><span style="color:#f2bc8c;">
</span><span style="color:#bcc2c3;">#[</span><span style="color:#b483c8;">derive</span><span style="color:#bcc2c3;">(</span><span style="color:#f2bc8c;">Debug</span><span style="color:#bcc2c3;">,</span><span style="color:#f2bc8c;"> Clone</span><span style="color:#bcc2c3;">)]
</span><span style="color:#1ad1ff;">pub </span><span style="font-weight:bold;color:#e88731;">struct </span><span style="color:#f2bc8c;">JsonArray</span><span style="color:#bcc2c3;">(</span><span style="color:#f2bc8c;">JsonValueVec</span><span style="color:#bcc2c3;">);
</span><span style="color:#f2bc8c;">
</span><span style="color:#1ad1ff;">impl </span><span style="color:#f2bc8c;">fmt</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">Display </span><span style="color:#1ad1ff;">for </span><span style="color:#f2bc8c;">JsonArray </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">    </span><span style="color:#1ad1ff;">fn </span><span style="font-weight:bold;color:#9f60b9;">fmt</span><span style="color:#bcc2c3;">(</span><span style="color:#1ad1ff;">&amp;</span><span style="color:#b483c8;">self</span><span style="color:#f2bc8c;">, </span><span style="color:#b483c8;">f</span><span style="color:#bcc2c3;">: </span><span style="color:#1ad1ff;">&amp;mut </span><span style="color:#f2bc8c;">fmt</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">Formatter</span><span style="color:#bcc2c3;">&lt;</span><span style="color:#f2bc8c;">&#39;</span><span style="color:#1ad1ff;">_</span><span style="color:#bcc2c3;">&gt;) -&gt; </span><span style="color:#f2bc8c;">fmt</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">Result </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">        </span><span style="color:#1ad1ff;">let</span><span style="color:#f2bc8c;"> s </span><span style="color:#1ad1ff;">= </span><span style="color:#80e5ff;">self</span><span style="color:#bcc2c3;">.</span><span style="color:#f2bc8c;">0.</span><span style="color:#e88731;">iter</span><span style="color:#bcc2c3;">().</span><span style="color:#e88731;">map</span><span style="color:#bcc2c3;">(</span><span style="color:#e88731;">ToString</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">to_string</span><span style="color:#bcc2c3;">).</span><span style="color:#f2bc8c;">collect</span><span style="color:#bcc2c3;">::&lt;</span><span style="color:#e88731;">Vec</span><span style="color:#bcc2c3;">&lt;</span><span style="color:#1ad1ff;">_</span><span style="color:#bcc2c3;">&gt;&gt;().</span><span style="color:#e88731;">join</span><span style="color:#bcc2c3;">(&quot;</span><span style="color:#44d581;">, </span><span style="color:#bcc2c3;">&quot;);
</span><span style="color:#f2bc8c;">        </span><span style="color:#e88731;">write!</span><span style="color:#bcc2c3;">(</span><span style="color:#f2bc8c;">f, </span><span style="color:#bcc2c3;">&quot;</span><span style="color:#44d581;">[{s}]</span><span style="color:#bcc2c3;">&quot;)
</span><span style="color:#f2bc8c;">    </span><span style="color:#bcc2c3;">}
</span><span style="color:#bcc2c3;">}
</span><span style="color:#f2bc8c;">
</span><span style="color:#f2bc8c;">nodyn</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">nodyn</span><span style="color:#1ad1ff;">! </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">    </span><span style="color:#bcc2c3;">#[</span><span style="color:#b483c8;">derive</span><span style="color:#bcc2c3;">(</span><span style="color:#f2bc8c;">Debug</span><span style="color:#bcc2c3;">,</span><span style="color:#f2bc8c;"> Clone</span><span style="color:#bcc2c3;">)]
</span><span style="color:#f2bc8c;">    </span><span style="color:#1ad1ff;">pub </span><span style="font-weight:bold;color:#e88731;">enum </span><span style="color:#f2bc8c;">JsonValue </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">        Null</span><span style="color:#bcc2c3;">,
</span><span style="color:#f2bc8c;">        </span><span style="color:#1ad1ff;">bool</span><span style="color:#bcc2c3;">,
</span><span style="color:#f2bc8c;">        </span><span style="color:#1ad1ff;">f64</span><span style="color:#bcc2c3;">,
</span><span style="color:#f2bc8c;">        </span><span style="color:#e88731;">String</span><span style="color:#bcc2c3;">,
</span><span style="color:#f2bc8c;">        JsonArray</span><span style="color:#bcc2c3;">,
</span><span style="color:#f2bc8c;">    </span><span style="color:#bcc2c3;">}
</span><span style="color:#f2bc8c;">    
</span><span style="color:#f2bc8c;">    vec</span><span style="color:#bcc2c3;">;
</span><span style="color:#f2bc8c;">
</span><span style="color:#f2bc8c;">    </span><span style="color:#1ad1ff;">impl </span><span style="color:#f2bc8c;">fmt::Display </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">        </span><span style="color:#1ad1ff;">fn </span><span style="font-weight:bold;color:#9f60b9;">fmt</span><span style="color:#bcc2c3;">(</span><span style="color:#1ad1ff;">&amp;</span><span style="color:#b483c8;">self</span><span style="color:#f2bc8c;">, </span><span style="color:#b483c8;">f</span><span style="color:#bcc2c3;">: </span><span style="color:#1ad1ff;">&amp;mut </span><span style="color:#f2bc8c;">fmt</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">Formatter</span><span style="color:#bcc2c3;">&lt;</span><span style="color:#f2bc8c;">&#39;</span><span style="color:#1ad1ff;">_</span><span style="color:#bcc2c3;">&gt;) -&gt; </span><span style="color:#f2bc8c;">fmt</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">Result</span><span style="color:#bcc2c3;">;
</span><span style="color:#f2bc8c;">    </span><span style="color:#bcc2c3;">}
</span><span style="color:#f2bc8c;">
</span><span style="color:#f2bc8c;">    </span><span style="color:#1ad1ff;">impl </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">        </span><span style="color:#1ad1ff;">pub const fn </span><span style="font-weight:bold;color:#9f60b9;">json_type_name</span><span style="color:#bcc2c3;">(</span><span style="color:#1ad1ff;">&amp;</span><span style="color:#b483c8;">self</span><span style="color:#bcc2c3;">) -&gt; </span><span style="color:#1ad1ff;">&amp;</span><span style="color:#80e5ff;">&#39;static </span><span style="color:#1ad1ff;">str </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">            </span><span style="color:#1ad1ff;">match </span><span style="color:#80e5ff;">self </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">                </span><span style="color:#1ad1ff;">Self</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">Null</span><span style="color:#bcc2c3;">(</span><span style="color:#1ad1ff;">_</span><span style="color:#bcc2c3;">) </span><span style="color:#1ad1ff;">=&gt; </span><span style="color:#bcc2c3;">&quot;</span><span style="color:#44d581;">null</span><span style="color:#bcc2c3;">&quot;,
</span><span style="color:#f2bc8c;">                </span><span style="color:#1ad1ff;">Self</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">Bool</span><span style="color:#bcc2c3;">(</span><span style="color:#1ad1ff;">_</span><span style="color:#bcc2c3;">) </span><span style="color:#1ad1ff;">=&gt; </span><span style="color:#bcc2c3;">&quot;</span><span style="color:#44d581;">boolean</span><span style="color:#bcc2c3;">&quot;,
</span><span style="color:#f2bc8c;">                </span><span style="color:#1ad1ff;">Self</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">F64</span><span style="color:#bcc2c3;">(</span><span style="color:#1ad1ff;">_</span><span style="color:#bcc2c3;">) </span><span style="color:#1ad1ff;">=&gt; </span><span style="color:#bcc2c3;">&quot;</span><span style="color:#44d581;">number</span><span style="color:#bcc2c3;">&quot;,
</span><span style="color:#f2bc8c;">                </span><span style="color:#1ad1ff;">Self</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">String</span><span style="color:#bcc2c3;">(</span><span style="color:#1ad1ff;">_</span><span style="color:#bcc2c3;">) </span><span style="color:#1ad1ff;">=&gt; </span><span style="color:#bcc2c3;">&quot;</span><span style="color:#44d581;">string</span><span style="color:#bcc2c3;">&quot;,
</span><span style="color:#f2bc8c;">                </span><span style="color:#1ad1ff;">Self</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">JsonArray</span><span style="color:#bcc2c3;">(</span><span style="color:#1ad1ff;">_</span><span style="color:#bcc2c3;">) </span><span style="color:#1ad1ff;">=&gt; </span><span style="color:#bcc2c3;">&quot;</span><span style="color:#44d581;">array</span><span style="color:#bcc2c3;">&quot;,
</span><span style="color:#f2bc8c;">            </span><span style="color:#bcc2c3;">}
</span><span style="color:#f2bc8c;">        </span><span style="color:#bcc2c3;">}
</span><span style="color:#f2bc8c;">    </span><span style="color:#bcc2c3;">}
</span><span style="color:#bcc2c3;">}
</span><span style="color:#f2bc8c;">
</span><span style="color:#f2bc8c;">
</span><span style="color:#1ad1ff;">let mut</span><span style="color:#f2bc8c;"> values </span><span style="color:#1ad1ff;">= </span><span style="color:#f2bc8c;">JsonValueVec</span><span style="color:#bcc2c3;">::</span><span style="color:#f2bc8c;">default</span><span style="color:#bcc2c3;">();
</span><span style="color:#f2bc8c;">values</span><span style="color:#bcc2c3;">.</span><span style="color:#e88731;">push</span><span style="color:#bcc2c3;">(</span><span style="color:#f2bc8c;">Null</span><span style="color:#bcc2c3;">);
</span><span style="color:#f2bc8c;">values</span><span style="color:#bcc2c3;">.</span><span style="color:#e88731;">push</span><span style="color:#bcc2c3;">(</span><span style="color:#f2bc8c;">true</span><span style="color:#bcc2c3;">);
</span><span style="color:#f2bc8c;">values</span><span style="color:#bcc2c3;">.</span><span style="color:#e88731;">push</span><span style="color:#bcc2c3;">(</span><span style="color:#f2bc8c;">42.0</span><span style="color:#bcc2c3;">);
</span><span style="color:#f2bc8c;">values</span><span style="color:#bcc2c3;">.</span><span style="color:#e88731;">push</span><span style="color:#bcc2c3;">(&quot;</span><span style="color:#44d581;">hello</span><span style="color:#bcc2c3;">&quot;.</span><span style="color:#e88731;">to_string</span><span style="color:#bcc2c3;">());
</span><span style="color:#f2bc8c;">values</span><span style="color:#bcc2c3;">.</span><span style="color:#e88731;">push</span><span style="color:#bcc2c3;">(</span><span style="color:#f2bc8c;">JsonArray</span><span style="color:#bcc2c3;">(</span><span style="color:#e88731;">json_value_vec!</span><span style="color:#bcc2c3;">[</span><span style="color:#f2bc8c;">Null</span><span style="color:#bcc2c3;">, </span><span style="color:#f2bc8c;">false</span><span style="color:#bcc2c3;">, </span><span style="color:#f2bc8c;">33.0</span><span style="color:#bcc2c3;">]));
</span><span style="color:#f2bc8c;">
</span><span style="color:#1ad1ff;">for</span><span style="color:#f2bc8c;"> val </span><span style="color:#1ad1ff;">in &amp;</span><span style="color:#f2bc8c;">values </span><span style="color:#bcc2c3;">{
</span><span style="color:#f2bc8c;">    </span><span style="color:#e88731;">println!</span><span style="color:#bcc2c3;">(&quot;</span><span style="color:#44d581;">{}: {}</span><span style="color:#bcc2c3;">&quot;,</span><span style="color:#f2bc8c;"> val</span><span style="color:#bcc2c3;">.</span><span style="color:#e88731;">json_type_name</span><span style="color:#bcc2c3;">(),</span><span style="color:#f2bc8c;"> val</span><span style="color:#bcc2c3;">);
</span><span style="color:#bcc2c3;">}
</span><span style="color:#f2bc8c;">
</span><span style="color:#1ad1ff;">##</span><span style="color:#f2bc8c;"> Installation
</span><span style="color:#f2bc8c;">
</span><span style="color:#f2bc8c;">Add `nodyn` to your `Cargo</span><span style="color:#bcc2c3;">.</span><span style="color:#f2bc8c;">toml`</span><span style="color:#bcc2c3;">:
</span><span style="color:#f2bc8c;">
</span><span style="color:#f2bc8c;">```toml
</span><span style="color:#bcc2c3;">[</span><span style="color:#f2bc8c;">dependencies</span><span style="color:#bcc2c3;">]
</span><span style="color:#f2bc8c;">nodyn </span><span style="color:#1ad1ff;">= </span><span style="color:#bcc2c3;">&quot;</span><span style="color:#44d581;">0.2.0</span><span style="color:#bcc2c3;">&quot;
</span></code></pre>
<h2 id="comparison">Comparison</h2>
<table><thead><tr><th>Feature</th><th>nodyn</th><th>enum_dispatch</th><th>sum_type</th><th>Box<dyn Trait></th></tr></thead><tbody>
<tr><td><strong>Runtime Cost</strong></td><td>Zero</td><td>Zero</td><td>Zero</td><td>Heap allocation</td></tr>
<tr><td><strong>Trait Delegation</strong></td><td>✅ Yes</td><td>✅ Scoped only</td><td>❌ No</td><td>✅ Yes</td></tr>
<tr><td><strong>Method Delegation</strong></td><td>✅ Yes</td><td>❌ No</td><td>❌ No</td><td>❌ No</td></tr>
<tr><td><strong>Type Introspection</strong></td><td>✅ Built-in</td><td>❌ No</td><td>❌ No</td><td>❌ No</td></tr>
<tr><td><strong>Vec Wrapper</strong></td><td>✅ Yes</td><td>❌ No</td><td>❌ No</td><td>❌ No</td></tr>
<tr><td><strong>Compile-Time Known</strong></td><td>Required</td><td>Required</td><td>Required</td><td>Not required</td></tr>
<tr><td><strong>Memory Overhead</strong></td><td>Discriminant only</td><td>Discriminant only</td><td>Discriminant only</td><td>Pointer + vtable</td></tr>
</tbody></table>
<ul>
<li><strong><a href="https://crates.io/crates/enum_dispatch">enum_dispatch</a></strong>: Optimizes dynamic dispatch with zero-cost enums but lacks method delegation and Vec wrappers.</li>
<li><strong><a href="https://crates.io/crates/sum_type">sum_type</a></strong>: Simplifies enum creation but lacks advanced features like delegation or introspection.</li>
</ul>
<h2 id="documentation">Documentation</h2>
<ul>
<li><a href="https://docs.rs/nodyn">API Documentation</a></li>
<li><a href="https://github.com/franklaranja/nodyn/blob/main/CHANGELOG.md">Changelog</a></li>
</ul>
<h2 id="contributing">Contributing</h2>
<p>Contributions are welcome! Check out the <a href="https://github.com/franklaranja/nodyn">GitHub repository</a> for issues, feature requests, or to submit pull requests.</p>
<h2 id="license">License</h2>
<p>This project is licensed under the MIT License.</p>

          <div class="crate-links">
          
            <a href="https:&#x2F;&#x2F;github.com&#x2F;franklaranja&#x2F;nodyn" class="cta-button">GitHub</a>
          
          
             <a href="https:&#x2F;&#x2F;crates.io&#x2F;crates&#x2F;nodyn" class="cta-button">crates.io</a>
          
          
             <a href="https:&#x2F;&#x2F;docs.rs&#x2F;nodyn" class="cta-button">crates.io</a>
          
          </div>
        </section>
    </main>

    <footer>
      <picture class="flourish">
         <source srcset="/images/flourish.avif" type="image/avif">
         <source srcset="/images/flourish.webp" type="image/webp">
         <img src="/images/flourish.png" alt="flourish with lots of curls">
      </picture>

      <h3><a href="/" class="neon">Laranja's Rust Shop</a></h3>

      <p>
        <a href="/articles">articles</a>
        | <a href="/code">code</a>
        | <a href="/contact">contact</a>
        | <a href="/about">about</a>
      </p>
      
      <p>&copy;2025 <a href="/about/">Frank Laranja</a>
    <footer>
</body>
</html>
